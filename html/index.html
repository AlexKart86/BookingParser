<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
</head>


  <body>
  <link rel="stylesheet" href="bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" />
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css" />
  <div class="container container-table">
      <div class="row vertical-center-row">
            <form class="form-inline">
              <div class="form-group">
                <input class="selectpicker form-control" id="station_from" placeholder="Станция отправления"> </input>
              </div>
              <div class="form-group">
                <input class="selectpicker form-control" id="station_to" placeholder="Станция назначения"> </input>
              </div>
              <div class="form-group">
                <label for="dtp">Дата</label>
                <div class="input-group date" id="dtp">
                  <input type="text" class="form-control"><span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span></span>
                </div>
              </div>
              <div class="form-group">
                  <button type="button" class="btn btn-primary" id="apply">Отслеживать</button>
              </div>
            </form>
       </div>
  </div>
    <script src="bower_components/moment/min/moment-with-locales.min.js"></script>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
    <script src="bower_components/typeahead.js/dist/typeahead.jquery.min.js"></script>

  <script>
    var station_list = {};


    var load_station_list = function(query, syncResult, asyncResult){
        $.ajax({
            url: "/get_stations",
            method: "POST",
            data: JSON.stringify({"name": query}),
            contentType: 'application/json',
            dataType: "json",
            success: function (data) {
                $.each(data, function(){
                  $.each(this, function(data){
                     station_list[data.station_name] = data.station_id;
                  });
                });
                asyncResult(data);
            }
        })
    }; 

    $(function(){
      $('#dtp').datetimepicker({
        locale: 'ru',
        format: 'DD.MM.YYYY'
      });
      $('#station_from, #station_to').typeahead({
        minLength: 2,
        highlight: true
      }, {
        source: load_station_list,
        display: 'title'
      });


      $('#apply').on('click', function(){
        console.log($('#station_from').val());
      });
    })
  </script>
  <style>
      html, body, .container-table {
          height: 100%;
      }
      .container-table {
          display: table;
      }
      .vertical-center-row {
          display: table-cell;
          vertical-align: middle;
      }
  </style>

  </body>

</html>